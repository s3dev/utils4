<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>utils - Collection of general utility-based functions &mdash; utils4 - v1.5.0 Documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="_static/css/s5defs-rules.css?v=0345028d" />

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=f8f0f945"></script>
        <script src="_static/doctools.js?v=9a2dae69"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="validation - A small collection of validation rules" href="validation.html" />
    <link rel="prev" title="user_interface - Format coloured text to the terminal" href="user_interface.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            utils4
              <img src="_static/s3dev_tri_white_sm.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                1.5.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="library.html">Libary API Documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="cmaps.html">cmaps - Provides easy access to the matplotlib’s colour maps</a></li>
<li class="toctree-l2"><a class="reference internal" href="config.html">config - Adds support for automatically reading an application’s config file</a></li>
<li class="toctree-l2"><a class="reference internal" href="convert.html">convert - Functions to convert between low-level types (binary, hex, ascii and int)</a></li>
<li class="toctree-l2"><a class="reference internal" href="crypto.html">crypto - Extended functionality from the base64 and hashlib libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="cutils.html">cutils - C-based utility functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="dfdiff.html">dfdiff - A pandas.DataFrame differencing tool</a></li>
<li class="toctree-l2"><a class="reference internal" href="dict2obj.html">dict2obj - Conversion tool for JSON structure to object</a></li>
<li class="toctree-l2"><a class="reference internal" href="filesys.html">filesys - General filesystem tests and utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="log.html">log - Providing easy logging to your project</a></li>
<li class="toctree-l2"><a class="reference internal" href="palette.html">palette - Quick access to named CSS4 colours</a></li>
<li class="toctree-l2"><a class="reference internal" href="progressbar.html">progressbar - A simple command line progess bar</a></li>
<li class="toctree-l2"><a class="reference internal" href="pywarnings.html">pywarnings - Easy wrapper to ignore Python warnings</a></li>
<li class="toctree-l2"><a class="reference internal" href="reader.html">reader - Data readers for formats which are no-longer supported</a></li>
<li class="toctree-l2"><a class="reference internal" href="registry.html">registry - A simple interface to the Windows registry</a></li>
<li class="toctree-l2"><a class="reference internal" href="reporterror.html">reporterror - Portable error reporting module</a></li>
<li class="toctree-l2"><a class="reference internal" href="srccheck.html">srccheck - Checksum functionality for source code</a></li>
<li class="toctree-l2"><a class="reference internal" href="stats.html">stats - Statistics methods without the overhead</a></li>
<li class="toctree-l2"><a class="reference internal" href="termcolour.html">termcolour - Easily add colour to terminal output</a></li>
<li class="toctree-l2"><a class="reference internal" href="tickers.html">tickers - Wait tickers for long-running processes</a></li>
<li class="toctree-l2"><a class="reference internal" href="timedelta.html">timedelta - Date and time delta calculator</a></li>
<li class="toctree-l2"><a class="reference internal" href="user_interface.html">user_interface - Format coloured text to the terminal</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">utils - Collection of general utility-based functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#utils.clean_dataframe"><code class="docutils literal notranslate"><span class="pre">clean_dataframe()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#utils.direxists"><code class="docutils literal notranslate"><span class="pre">direxists()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#utils.fileexists"><code class="docutils literal notranslate"><span class="pre">fileexists()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#utils.format_exif_date"><code class="docutils literal notranslate"><span class="pre">format_exif_date()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#utils.get_os"><code class="docutils literal notranslate"><span class="pre">get_os()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#utils.getdrivername"><code class="docutils literal notranslate"><span class="pre">getdrivername()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#utils.getsitepackages"><code class="docutils literal notranslate"><span class="pre">getsitepackages()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#utils.gzip_compress"><code class="docutils literal notranslate"><span class="pre">gzip_compress()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#utils.gzip_decompress"><code class="docutils literal notranslate"><span class="pre">gzip_decompress()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#utils.ping"><code class="docutils literal notranslate"><span class="pre">ping()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#utils.testimport"><code class="docutils literal notranslate"><span class="pre">testimport()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#utils.unidecode"><code class="docutils literal notranslate"><span class="pre">unidecode()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="validation.html">validation - A small collection of validation rules</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Change Log</a></li>
<li class="toctree-l1"><a class="reference internal" href="contact.html">Contact Us</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">utils4</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="library.html">Libary API Documentation</a></li>
      <li class="breadcrumb-item active">utils - Collection of general utility-based functions</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-utils">
<span id="utils-collection-of-general-utility-based-functions"></span><h1>utils - Collection of general utility-based functions<a class="headerlink" href="#module-utils" title="Link to this heading"></a></h1>
<dl class="field-list">
<dt class="field-odd">Purpose<span class="colon">:</span></dt>
<dd class="field-odd"><p>Central library for general utility-based methods.</p>
<p>This <code class="docutils literal notranslate"><span class="pre">utils</span></code> module was the starting place of the original
<code class="docutils literal notranslate"><span class="pre">utils</span></code> library. Therefore, it’s historically been a
‘dumping-ground’ for general S3DEV utilities and function wrappers
specialised to the needs of S3DEV projects, which did not seem to
fit in anywhere else. So we’ll be honest, it’s a bit of a melting
pot of functions.</p>
<p>With the overhaul of the <code class="docutils literal notranslate"><span class="pre">utils3</span></code> library into <code class="docutils literal notranslate"><span class="pre">utils4</span></code>, <em>many</em>
of the original functions, which were no longer being used, have
been removed in an effort to clean the module’s code base.</p>
<p>If you are looking for a function which used to be here, please
refer to the last <code class="docutils literal notranslate"><span class="pre">utils3</span></code> release, which is v0.15.1.</p>
</dd>
<dt class="field-even">Platform<span class="colon">:</span></dt>
<dd class="field-even"><p>Linux/Windows | Python 3.7+</p>
</dd>
<dt class="field-odd">Developer<span class="colon">:</span></dt>
<dd class="field-odd"><p>J Berendt</p>
</dd>
<dt class="field-even">Email<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="mailto:support&#37;&#52;&#48;s3dev&#46;uk">support<span>&#64;</span>s3dev<span>&#46;</span>uk</a></p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Any libraries which are not built-in, are imported <em>only</em> if/when
the function which uses them is called.</p>
<p>This helps to reduce the packages required by <code class="docutils literal notranslate"><span class="pre">utils4</span></code>.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example<span class="colon">:</span></dt>
<dd class="field-odd"><p>For usage examples, please refer to the docstring for each method.</p>
</dd>
</dl>
<dl class="py function">
<dt class="sig sig-object py" id="utils.clean_dataframe">
<span class="sig-prename descclassname"><span class="pre">utils.</span></span><span class="sig-name descname"><span class="pre">clean_dataframe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pandas.DataFrame</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/utils.html#clean_dataframe"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.clean_dataframe" title="Link to this definition"></a></dt>
<dd><p>Clean a <code class="docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code> data structure.</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>df</strong> (<em>pd.DataFrame</em>) – DataFrame to be cleaned.</p>
</dd>
<dt class="field-even">Design<span class="colon">:</span></dt>
<dd class="field-even"><p>The DataFrame is cleaned <em>in-place</em>. An object is <em>not</em> returned by
this function.</p>
<p>The following cleaning tasks are performed:</p>
<blockquote>
<div><ul>
<li><p>Column names:</p>
<blockquote>
<div><ul class="simple">
<li><p>All punctuation characters are removed, with the exception
of three characters. See next bullet point.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">-</span></code>, <code class="docutils literal notranslate"><span class="pre">[space]</span></code> and <code class="docutils literal notranslate"><span class="pre">_</span></code> characters are replaced
with an underscore.</p></li>
<li><p>All column names are converted to lower case.</p></li>
</ul>
</div></blockquote>
</li>
<li><p>Data:</p>
<blockquote>
<div><ul class="simple">
<li><p>All <code class="docutils literal notranslate"><span class="pre">object</span></code> (string) fields, are stripped of leading and
trailing whitespace.</p></li>
</ul>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</dd>
<dt class="field-odd">Example<span class="colon">:</span></dt>
<dd class="field-odd"><p>Example for cleaning a DataFrame:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>  <span class="c1"># For demonstration only.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">utils4</span> <span class="kn">import</span> <span class="n">utils</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Define a dirty testing dataset.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;Column #1&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39; Text field 1.&#39;</span><span class="p">,</span>
<span class="go">                                     &#39;   Text field 2.&#39;,</span>
<span class="go">                                     &#39; Text field 3.    &#39;,</span>
<span class="go">                                     &#39;  Text field 4.  &#39;,</span>
<span class="go">                                     &#39;  Text field 5. &#39;],</span>
<span class="go">                       &#39;  COLUmn (2)&#39;: [1.0,</span>
<span class="go">                                        2.0,</span>
<span class="go">                                        3.0,</span>
<span class="go">                                        &#39;4&#39;,</span>
<span class="go">                                        &#39;5.0&#39;],</span>
<span class="go">                       &#39;COLUMN 3  &#39;: [1,</span>
<span class="go">                                      2,</span>
<span class="go">                                      3.0,</span>
<span class="go">                                      4,</span>
<span class="go">                                      5.0]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">utils</span><span class="o">.</span><span class="n">clean_dataframe</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span>
<span class="go">        column_1 column_2  column_3</span>
<span class="go">0  Text field 1.      1.0       1.0</span>
<span class="go">1  Text field 2.      2.0       2.0</span>
<span class="go">2  Text field 3.      3.0       3.0</span>
<span class="go">3  Text field 4.        4       4.0</span>
<span class="go">4  Text field 5.      5.0       5.0</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.direxists">
<span class="sig-prename descclassname"><span class="pre">utils.</span></span><span class="sig-name descname"><span class="pre">direxists</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">create_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="reference internal" href="_modules/utils.html#direxists"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.direxists" title="Link to this definition"></a></dt>
<dd><p>Test if a directory exists. If not, create it, if instructed.</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<em>str</em>) – The directory path to be tested.</p></li>
<li><p><strong>create_path</strong> (<em>bool</em><em>, </em><em>optional</em>) – Create the path if it doesn’t exist.
Defaults to False.</p></li>
</ul>
</dd>
<dt class="field-even">Design<span class="colon">:</span></dt>
<dd class="field-even"><p>Function designed to test if a directory path exists. If the
path does <em>not</em> exist, the path can be created; as determined by
the <code class="docutils literal notranslate"><span class="pre">create_path</span></code> parameter.</p>
<p>This function extends the built-in <code class="xref py py-func docutils literal notranslate"><span class="pre">os.path.exists()</span></code> function
in that the path can be created if it doesn’t already exist, by
passing the <code class="docutils literal notranslate"><span class="pre">create_path</span></code> parameter as <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
<p>If the path is created by this function, the function is recursively
called to test if the path exists, and will return <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
<p>If a filename is passed with the path, the filename is automatically
stripped from the path before the test begins.</p>
</dd>
<dt class="field-odd">Example<span class="colon">:</span></dt>
<dd class="field-odd"><p>Test if a directory exists, and create it if it does not exist:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">utils4</span> <span class="kn">import</span> <span class="n">utils</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">utils</span><span class="o">.</span><span class="n">direxists</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="s1">&#39;/tmp/path/to_create/file.csv&#39;</span><span class="p">,</span>
<span class="go">                    create_path=True)</span>
</pre></div>
</div>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>True if the directory exists (or was created), otherwise False.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.fileexists">
<span class="sig-prename descclassname"><span class="pre">utils.</span></span><span class="sig-name descname"><span class="pre">fileexists</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filepath</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">error</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'ignore'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="reference internal" href="_modules/utils.html#fileexists"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.fileexists" title="Link to this definition"></a></dt>
<dd><p>Test if a file exists. If not, notify the user or raise an error.</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filepath</strong> (<em>str</em>) – Full file path to test.</p></li>
<li><p><strong>error</strong> (<em>bool</em><em>, </em><em>optional</em>) – <p>Action to be taken if the file does not exist.
Defaults to ‘ignore’. Options:</p>
<blockquote>
<div><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">'ignore'</span></code>: Take no action.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'alert'</span></code>: Alert the user the filepath does not exist via
a simple message to the terminal.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'raise'</span></code>: Raise a <code class="docutils literal notranslate"><span class="pre">FileNotFoundError</span></code>. This will abort
all subsequent processing.</p></li>
</ul>
</div></blockquote>
</p></li>
</ul>
</dd>
<dt class="field-even">Design<span class="colon">:</span></dt>
<dd class="field-even"><p>Function designed check if a file exists.  A boolean value is
returned to the calling program.</p>
<p>This function extends the built-in <code class="xref py py-func docutils literal notranslate"><span class="pre">os.path.isfile()</span></code> function
in that the user can be notified if the path does not exist, or an
error can be raised.</p>
</dd>
<dt class="field-odd">Example<span class="colon">:</span></dt>
<dd class="field-odd"><p>Test if a file exists, using <code class="docutils literal notranslate"><span class="pre">'ignore'</span></code>, the default action:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">utils4</span> <span class="kn">import</span> <span class="n">utils</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">if</span> <span class="n">utils</span><span class="o">.</span><span class="n">fileexists</span><span class="p">(</span><span class="n">filepath</span><span class="o">=</span><span class="s1">&#39;/tmp/path/to/file.csv&#39;</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="o">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">else</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="o">...</span>
</pre></div>
</div>
<p>Test if a file exists, using <code class="docutils literal notranslate"><span class="pre">'alert'</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">utils4</span> <span class="kn">import</span> <span class="n">utils</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">if</span> <span class="n">utils</span><span class="o">.</span><span class="n">fileexists</span><span class="p">(</span><span class="n">filepath</span><span class="o">=</span><span class="s1">&#39;/tmp/path/to/file.csv&#39;</span><span class="p">,</span>
<span class="go">                        error=&#39;alert&#39;):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="o">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">else</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="o">...</span>

<span class="go">File not found: /tmp/path/to/file.csv</span>
</pre></div>
</div>
<p>Test if a file exists, using <code class="docutils literal notranslate"><span class="pre">'raise'</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">utils4</span> <span class="kn">import</span> <span class="n">utils</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">if</span> <span class="n">utils</span><span class="o">.</span><span class="n">fileexists</span><span class="p">(</span><span class="n">filepath</span><span class="o">=</span><span class="s1">&#39;/tmp/path/to/file.csv&#39;</span><span class="p">,</span>
<span class="go">                        error=&#39;raise&#39;):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="o">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">else</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="o">...</span>

<span class="go">FileNotFoundError: File not found: /tmp/path/to/file.csv</span>
</pre></div>
</div>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>FileNotFoundError</strong> – If the filepath does not exist and the <code class="docutils literal notranslate"><span class="pre">error</span></code>
    parameter is <code class="docutils literal notranslate"><span class="pre">'raise'</span></code>.</p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>True if the file exists, otherwise False.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.format_exif_date">
<span class="sig-prename descclassname"><span class="pre">utils.</span></span><span class="sig-name descname"><span class="pre">format_exif_date</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">datestring</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_format</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'%Y:%m:%d</span> <span class="pre">%H:%M:%S'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_format</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'%Y%m%d%H%M%S'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_datetime</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">datetime</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span></span></span><a class="reference internal" href="_modules/utils.html#format_exif_date"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.format_exif_date" title="Link to this definition"></a></dt>
<dd><p>Format an exif timestamp.</p>
<blockquote>
<div><p>This function is useful for storing an exif date as a datetime string.
For example, extracting the exif data from an image to be stored into
a database.</p>
</div></blockquote>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>datestring</strong> (<em>str</em>) – The datetime string to be formatted.
A typical exif date format is: yyyy:mm:dd hh:mi:ss</p></li>
<li><p><strong>input_format</strong> (<em>str</em><em>, </em><em>optional</em>) – Format mask for the input datetime value.
Defaults to ‘%Y:%m:%d %H:%M:%S’.</p></li>
<li><p><strong>output_format</strong> (<em>str</em><em>, </em><em>optional</em>) – Format mask for the output datetime,
if returned as a string. Defaults to ‘%Y%m%d%H%M%S’.</p></li>
<li><p><strong>return_datetime</strong> (<em>bool</em><em>, </em><em>optional</em>) – Return a <code class="docutils literal notranslate"><span class="pre">datetime</span></code> object, rather
than a formatted string.</p></li>
</ul>
</dd>
<dt class="field-even">Design<span class="colon">:</span></dt>
<dd class="field-even"><p>Function designed to convert the exif date/timestamp from
‘2010:01:31 12:31:18’ (or a caller specified format) to a format
specified by the caller.</p>
<p>The default input mask is the standard exif capture datetime format.</p>
</dd>
<dt class="field-odd">Example<span class="colon">:</span></dt>
<dd class="field-odd"><p>Convert the exif datetime to the default output string format:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">utils4</span> <span class="kn">import</span> <span class="n">utils</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">formatted</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">format_exif_date</span><span class="p">(</span><span class="s1">&#39;2010:01:31 12:31:18&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">formatted</span>
<span class="go">&#39;20100131123118&#39;</span>
</pre></div>
</div>
<p>Convert the exif datetime to a datetime object:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">utils4</span> <span class="kn">import</span> <span class="n">utils</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">formatted</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">format_exif_date</span><span class="p">(</span><span class="s1">&#39;2010:01:31 12:31:18&#39;</span><span class="p">,</span>
<span class="go">                                       return_datetime=True)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">formatted</span>
<span class="go">datetime.datetime(2010, 1, 31, 12, 31, 18)</span>
</pre></div>
</div>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A formatted datetime string, if the
<code class="docutils literal notranslate"><span class="pre">return_datetime</span></code> parameter is <code class="docutils literal notranslate"><span class="pre">False</span></code>, otherwise a
<code class="docutils literal notranslate"><span class="pre">datetime.datetime</span></code> object.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Union[str, datetime.datetime]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.get_os">
<span class="sig-prename descclassname"><span class="pre">utils.</span></span><span class="sig-name descname"><span class="pre">get_os</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="_modules/utils.html#get_os"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.get_os" title="Link to this definition"></a></dt>
<dd><p>Get the platform’s OS.</p>
<p>This method is a very thin wrapper around the <code class="xref py py-func docutils literal notranslate"><span class="pre">platform.system()</span></code>
function.</p>
<dl class="field-list">
<dt class="field-odd">Example<span class="colon">:</span></dt>
<dd class="field-odd"><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">utils4</span> <span class="kn">import</span> <span class="n">utils</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">myos</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">get_os</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">myos</span>
<span class="go">&#39;linux&#39;</span>
</pre></div>
</div>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A string of the platform’s operating system, in lower case.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.getdrivername">
<span class="sig-prename descclassname"><span class="pre">utils.</span></span><span class="sig-name descname"><span class="pre">getdrivername</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">driver</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_all</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">list</span></span></span><a class="reference internal" href="_modules/utils.html#getdrivername"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.getdrivername" title="Link to this definition"></a></dt>
<dd><p>Return a list of ODBC driver names, matching the regex pattern.</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>driver</strong> (<em>str</em>) – A <strong>regex pattern</strong> for the ODBC driver you’re searching.</p></li>
<li><p><strong>return_all</strong> (<em>bool</em><em>, </em><em>optional</em>) – If True, <em>all</em> drivers matching the
pattern are returned. Defaults to False, which returns only the
first driver name.</p></li>
</ul>
</dd>
<dt class="field-even">Design<span class="colon">:</span></dt>
<dd class="field-even"><p>This is a helper function designed to get and return the names
of ODBC drivers.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">driver</span></code> parameter should be formatted as a regex
pattern. If multiple drivers are found, by default, only the
first driver in the list is returned. However, the
<code class="docutils literal notranslate"><span class="pre">return_all</span></code> parameter adjusts this action to return all driver
names.</p>
<p>This function has a dependency on the <code class="docutils literal notranslate"><span class="pre">pyodbc</span></code> library. Therefore,
the <a class="reference internal" href="#utils.testimport" title="utils.testimport"><code class="xref py py-func docutils literal notranslate"><span class="pre">testimport()</span></code></a> function is called before <code class="docutils literal notranslate"><span class="pre">pyodbc</span></code>
is imported. If the <code class="docutils literal notranslate"><span class="pre">pyodbc</span></code> library is not installed, the user is
notified.</p>
</dd>
<dt class="field-odd">Dependencies<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">pyodbc</span></code> library</p></li>
</ul>
</dd>
<dt class="field-even">Example<span class="colon">:</span></dt>
<dd class="field-even"><p>Get the driver name for the SQL Server ODBC driver:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">utils4</span> <span class="kn">import</span> <span class="n">utils</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">driver</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">getdrivername</span><span class="p">(</span><span class="n">driver</span><span class="o">=</span><span class="s1">&#39;SQL Server.*&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd>
<dt class="field-odd">Troubleshooting<span class="colon">:</span></dt>
<dd class="field-odd"><ul>
<li><p>On Unix-like systems, the following error message:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="ne">ImportError</span><span class="p">:</span> <span class="n">libodbc</span><span class="o">.</span><span class="n">so</span><span class="mf">.2</span><span class="p">:</span> <span class="n">cannot</span> <span class="nb">open</span> <span class="n">shared</span> <span class="nb">object</span> <span class="n">file</span><span class="p">:</span> <span class="n">No</span> <span class="n">such</span> <span class="n">file</span> <span class="ow">or</span> <span class="n">directory</span>
</pre></div>
</div>
<p>can be resolved by installing the <code class="docutils literal notranslate"><span class="pre">unixodbc-dev</span></code> package as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo apt install unixodbc-dev
</pre></div>
</div>
</li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A list of ODBC drivers, if any were found.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.getsitepackages">
<span class="sig-prename descclassname"><span class="pre">utils.</span></span><span class="sig-name descname"><span class="pre">getsitepackages</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="_modules/utils.html#getsitepackages"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.getsitepackages" title="Link to this definition"></a></dt>
<dd><p>Return the Python installation’s site packages directory.</p>
<dl class="field-list">
<dt class="field-odd">Design<span class="colon">:</span></dt>
<dd class="field-odd"><p>The function first uses the local <a class="reference internal" href="#utils.get_os" title="utils.get_os"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_os()</span></code></a>
function to get the system’s OS. The OS is then tested and the
site-packages location is returned using the OS-appropriate element
from the list returned by the built-in <code class="xref py py-func docutils literal notranslate"><span class="pre">site.getsitepackages()</span></code>
function.</p>
<p>If the OS is not accounted for, or fails the test, a value of
‘unknown’ is returned.</p>
</dd>
<dt class="field-even">Rationale<span class="colon">:</span></dt>
<dd class="field-even"><p>The need for this function comes out of the observation there are many
(many!) different ways on stackoverflow (and other sites) to get the
location to which <code class="docutils literal notranslate"><span class="pre">pip</span></code> will install a package, and many of the
answers contradict each other. Also, the <code class="xref py py-func docutils literal notranslate"><span class="pre">site.getsitepackages()</span></code>
function returns a list of options (in all tested cases); and the
Linux / Windows paths are in different locations in this list.</p>
</dd>
<dt class="field-odd">Example<span class="colon">:</span></dt>
<dd class="field-odd"><p>Get the location of the <code class="docutils literal notranslate"><span class="pre">site-packages</span></code> directory:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">utils4</span> <span class="kn">import</span> <span class="n">utils</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">utils</span><span class="o">.</span><span class="n">getsitepackages</span><span class="p">()</span>
<span class="go">&#39;/home/&lt;username&gt;/venvs/py38/lib/python3.8/site-packages&#39;</span>
</pre></div>
</div>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Full path to the <code class="docutils literal notranslate"><span class="pre">site-packages</span></code> directory.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.gzip_compress">
<span class="sig-prename descclassname"><span class="pre">utils.</span></span><span class="sig-name descname"><span class="pre">gzip_compress</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">in_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">out_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="_modules/utils.html#gzip_compress"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.gzip_compress" title="Link to this definition"></a></dt>
<dd><p>Compress a file using <code class="docutils literal notranslate"><span class="pre">gzip</span></code>.</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>in_path</strong> (<em>str</em>) – Full path to the file to be compressed. If the file
does not exist, a <code class="docutils literal notranslate"><span class="pre">FileNotFoundError</span></code> is raised.</p></li>
<li><p><strong>out_path</strong> (<em>str</em><em>, </em><em>optional</em>) – Full path to the compressed output file.
Defaults to None. If this value is <code class="docutils literal notranslate"><span class="pre">None</span></code> a <code class="docutils literal notranslate"><span class="pre">'.gz'</span></code> file
extension is appended to the path provided to the <code class="docutils literal notranslate"><span class="pre">in_path</span></code>
parameter.</p></li>
<li><p><strong>size</strong> (<em>int</em><em>, </em><em>optional</em>) – Size of the chunk to be read / written during
compression. Defaults to 10MiB.</p></li>
</ul>
</dd>
<dt class="field-even">Example<span class="colon">:</span></dt>
<dd class="field-even"><p>Compress a text file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">utils4</span> <span class="kn">import</span> <span class="n">utils</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">utils</span><span class="o">.</span><span class="n">gzip_compress</span><span class="p">(</span><span class="n">in_path</span><span class="o">=</span><span class="s1">&#39;/tmp/rand.txt&#39;</span><span class="p">)</span>
<span class="go">&#39;/tmp/rand.txt.gz&#39;</span>
</pre></div>
</div>
<p>Compress a text file, specifying the output path:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">utils4</span> <span class="kn">import</span> <span class="n">utils</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">utils</span><span class="o">.</span><span class="n">gzip_compress</span><span class="p">(</span><span class="n">in_path</span><span class="o">=</span><span class="s1">&#39;/tmp/rand.txt&#39;</span><span class="p">,</span> <span class="n">out_path</span><span class="o">=</span><span class="s1">&#39;/tmp/rand2.txt.gz&#39;</span><span class="p">)</span>
<span class="go">&#39;/tmp/rand2.txt.gz&#39;</span>
</pre></div>
</div>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Full path to the output file.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.gzip_decompress">
<span class="sig-prename descclassname"><span class="pre">utils.</span></span><span class="sig-name descname"><span class="pre">gzip_decompress</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">encoding</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'utf-8'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="reference internal" href="_modules/utils.html#gzip_decompress"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.gzip_decompress" title="Link to this definition"></a></dt>
<dd><p>Decompress a <code class="docutils literal notranslate"><span class="pre">.gz</span></code> file using <code class="docutils literal notranslate"><span class="pre">gzip</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<em>str</em>) – Full path to the file to be decompressed. If the file
does not exist, a <code class="docutils literal notranslate"><span class="pre">FileNotFoundError</span></code> is raised.</p></li>
<li><p><strong>encoding</strong> (<em>str</em><em>, </em><em>optional</em>) – Encoding to be used to decode the
decompressed binary data. Defaults to ‘utf-8’.</p></li>
<li><p><strong>size</strong> (<em>int</em><em>, </em><em>optional</em>) – Size of the chunk to be read / written during
decompression. Defaults to 1MiB.</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The output path is simply the <code class="docutils literal notranslate"><span class="pre">path</span></code> value with <em>last</em> file
extension removed.</p>
<p>In general cases, a file compressed using gzip will have a <code class="docutils literal notranslate"><span class="pre">.gz</span></code>
extension appended onto the existing filename and extension.
For example: <code class="docutils literal notranslate"><span class="pre">data.txt.gz</span></code>.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>Newline Characters:</strong></p>
<p>When the decompressed file is written, the <code class="docutils literal notranslate"><span class="pre">newline</span></code> character is
specified as <code class="docutils literal notranslate"><span class="pre">''</span></code>, which enables ‘universal newline mode’, whereby
the system’s newline character is used. However, the <em>original</em> line
endings - those used in the compressed file - are written back to the
decompressed file.</p>
<p>This method is used to ensure the checksum hash on the original
(unzipped) and decompressed file can be compared.</p>
</div>
<dl class="field-list">
<dt class="field-odd">Example<span class="colon">:</span></dt>
<dd class="field-odd"><p>Decompress a text file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">utils4</span> <span class="kn">import</span> <span class="n">utils</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">utils</span><span class="o">.</span><span class="n">gzip_decompress</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="s1">&#39;/tmp/rand.txt.gz&#39;</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>True if the decompression was successful, otherwise False.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.ping">
<span class="sig-prename descclassname"><span class="pre">utils.</span></span><span class="sig-name descname"><span class="pre">ping</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">server</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">count</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="reference internal" href="_modules/utils.html#ping"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.ping" title="Link to this definition"></a></dt>
<dd><p>Ping an IP address, server or web address.</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>server</strong> (<em>str</em>) – IP address, server name or web address.</p></li>
<li><p><strong>count</strong> (<em>int</em><em>, </em><em>optional</em>) – The number of ping attempts. Defaults to 1.</p></li>
<li><p><strong>timeout</strong> (<em>int</em><em>, </em><em>optional</em>) – Number of seconds to wait for response.
Defaults to 5.</p></li>
<li><p><strong>verbose</strong> (<em>bool</em><em>, </em><em>optional</em>) – Display all stdout and/or stderr output, if
the returned status code is non-zero. Defaults to False.</p></li>
</ul>
</dd>
<dt class="field-even">Design<span class="colon">:</span></dt>
<dd class="field-even"><p>Using the platform’s native <code class="docutils literal notranslate"><span class="pre">ping</span></code> command (via a <code class="docutils literal notranslate"><span class="pre">subprocess</span></code>
call) the host is pinged, and a boolean value is returned to the
caller to indicate if the ping was successful.</p>
<p>A ping status:</p>
<blockquote>
<div><ul class="simple">
<li><p>0 returns True</p></li>
<li><p>Non-zero returns False</p></li>
</ul>
</div></blockquote>
<p>If the server name is preceeded by <code class="docutils literal notranslate"><span class="pre">\\</span></code> or <code class="docutils literal notranslate"><span class="pre">//</span></code>, these are
stripped out using the built-in <code class="xref py py-func docutils literal notranslate"><span class="pre">os.path.basename()</span></code> function.</p>
</dd>
<dt class="field-odd">Example<span class="colon">:</span></dt>
<dd class="field-odd"><p>Ping the local PC at 127.0.0.1:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">utils4</span> <span class="kn">import</span> <span class="n">utils</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">utils</span><span class="o">.</span><span class="n">ping</span><span class="p">(</span><span class="n">server</span><span class="o">=</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<p>Ping an unknown server:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">utils4</span> <span class="kn">import</span> <span class="n">utils</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">utils</span><span class="o">.</span><span class="n">ping</span><span class="p">(</span><span class="n">server</span><span class="o">=</span><span class="s1">&#39;//S3DHOST01&#39;</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="go">[PingError]:</span>
<span class="go">ping: S3DHOST01: Temporary failure in name resolution</span>
<span class="go">False</span>
</pre></div>
</div>
<p>Ping an unreachable IP address:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">utils4</span> <span class="kn">import</span> <span class="n">utils</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">utils</span><span class="o">.</span><span class="n">ping</span><span class="p">(</span><span class="n">server</span><span class="o">=</span><span class="s1">&#39;192.168.0.99&#39;</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="go">[PingError]:</span>
<span class="go">PING 192.168.0.99 (192.168.0.99) 56(84) bytes of data.</span>
<span class="go">From 192.168.0.XX icmp_seq=1 Destination Host Unreachable</span>
<span class="go">From 192.168.0.XX icmp_seq=2 Destination Host Unreachable</span>
<span class="go">From 192.168.0.XX icmp_seq=3 Destination Host Unreachable</span>

<span class="go">--- 192.168.0.99 ping statistics ---</span>
<span class="go">3 packets transmitted, 0 received, +3 errors, 100% packet loss, time 2037ms</span>
<span class="go">False</span>
</pre></div>
</div>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>True if the ping was successful, otherwise False.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.testimport">
<span class="sig-prename descclassname"><span class="pre">utils.</span></span><span class="sig-name descname"><span class="pre">testimport</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">module_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="reference internal" href="_modules/utils.html#testimport"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.testimport" title="Link to this definition"></a></dt>
<dd><p>Test if a Python library is installed.</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>module_name</strong> (<em>str</em>) – Exact name of the module to be found.</p></li>
<li><p><strong>verbose</strong> (<em>bool</em><em>, </em><em>optional</em>) – Notify if the library is not installed.
Defaults to True.</p></li>
</ul>
</dd>
<dt class="field-even">Design<span class="colon">:</span></dt>
<dd class="field-even"><p>This is a small helper function designed to test if a library is
installed before trying to import it.</p>
<p>If the library is not intalled the user is notified, if the <code class="docutils literal notranslate"><span class="pre">verbose</span></code>
argument is True.</p>
</dd>
<dt class="field-odd">Internal Use<span class="colon">:</span></dt>
<dd class="field-odd"><p>For example, the <a class="reference internal" href="#utils.getdrivername" title="utils.getdrivername"><code class="xref py py-meth docutils literal notranslate"><span class="pre">getdrivername()</span></code></a> function uses this
function before attempting to import the <code class="docutils literal notranslate"><span class="pre">pyodbc</span></code> library.</p>
</dd>
<dt class="field-even">Example<span class="colon">:</span></dt>
<dd class="field-even"><p>Execute a path only if <code class="docutils literal notranslate"><span class="pre">mymodule</span></code> is installed:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">utils4</span> <span class="kn">import</span> <span class="n">utils</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">if</span> <span class="n">utils</span><span class="o">.</span><span class="n">testimport</span><span class="p">(</span><span class="s1">&#39;mymodule&#39;</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="kn">import</span> <span class="nn">mymodule</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="o">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">else</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="o">...</span>
</pre></div>
</div>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>True if the library is installed, otherwise False.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.unidecode">
<span class="sig-prename descclassname"><span class="pre">utils.</span></span><span class="sig-name descname"><span class="pre">unidecode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">string</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="_modules/utils.html#unidecode"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#utils.unidecode" title="Link to this definition"></a></dt>
<dd><p>Attempt to convert a Unicode string object into a 7-bit ASCII string.</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>string</strong> (<em>str</em>) – The string to be decoded.</p></li>
<li><p><strong>**kwargs</strong> (<em>dict</em>) – Keyword arguments passed directly into the underlying
<code class="xref py py-func docutils literal notranslate"><span class="pre">unidecode.unidecode()</span></code> function.</p></li>
</ul>
</dd>
<dt class="field-even">Design<span class="colon">:</span></dt>
<dd class="field-even"><p>This function is a light wrapper around the <code class="xref py py-func docutils literal notranslate"><span class="pre">unidecode.unidecode()</span></code>
function.</p>
<p><strong>Per the</strong> <code class="docutils literal notranslate"><span class="pre">unicode</span></code> <strong>docstring:</strong></p>
<p>“Transliterate an Unicode object into an ASCII string.”</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">unidecode</span><span class="p">(</span><span class="sa">u</span><span class="s2">&quot;北亰&quot;</span><span class="p">)</span>
<span class="go">&quot;Bei Jing &quot;</span>
</pre></div>
</div>
<p>“This function first tries to convert the string using ASCII codec.
If it fails (because of non-ASCII characters), it falls back to
transliteration using the character tables.”</p>
<p>“This is approx. five times faster if the string only contains ASCII
characters, but slightly slower than
<code class="xref py py-func docutils literal notranslate"><span class="pre">unidecode.unicode_expect_nonascii()</span></code> if non-ASCII characters are
present.”</p>
</dd>
<dt class="field-odd">Dependencies<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">unidecode</span></code> library</p></li>
</ul>
</dd>
<dt class="field-even">Example<span class="colon">:</span></dt>
<dd class="field-even"><p>Convert a Polish address into pure ASCII:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">utils4</span> <span class="kn">import</span> <span class="n">utils</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">addr</span> <span class="o">=</span> <span class="s1">&#39;ul. Bałtów 8a 27-423 Bałtów, woj. świętokrzyskie&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">utils</span><span class="o">.</span><span class="n">unidecode</span><span class="p">(</span><span class="n">addr</span><span class="p">)</span>
<span class="go">&#39;ul. Baltow 8a 27-423 Baltow, woj. swietokrzyskie&#39;</span>
</pre></div>
</div>
<p>Convert the first line of ‘The Seventh Letter’, by Plato:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">utils4</span> <span class="kn">import</span> <span class="n">utils</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">text</span> <span class="o">=</span> <span class="s1">&#39;Πλάτων τοῖς Δίωνος οἰκείοις τε καὶ ἑταίροις εὖ πράττειν.&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">utils</span><span class="o">.</span><span class="n">unidecode</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
<span class="go">&#39;Platon tois Dionos oikeiois te kai etairois eu prattein.&#39;</span>
</pre></div>
</div>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>If the <code class="docutils literal notranslate"><span class="pre">unidecode</span></code> library is installed and the passed
<code class="docutils literal notranslate"><span class="pre">string</span></code> value is a <code class="docutils literal notranslate"><span class="pre">str</span></code> data type, the decoded string is
returned, otherwise the original value is returned.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="user_interface.html" class="btn btn-neutral float-left" title="user_interface - Format coloured text to the terminal" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="validation.html" class="btn btn-neutral float-right" title="validation - A small collection of validation rules" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2016-2024 | s3dev | version 1.5.0.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>